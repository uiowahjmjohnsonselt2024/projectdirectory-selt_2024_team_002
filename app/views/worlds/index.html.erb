<!DOCTYPE html>
<html lang="en-US">
<head>
  <style>
      .tab {
          overflow: hidden;
          border-bottom: 1px solid #ccc;
          display: flex;
          width: 100%;
          justify-content: left;
      }
      .tab button {
          background-color: inherit;
          border: none;
          outline: none;
          cursor: pointer;
          padding: 14px 16px;
          transition: 0.3s;
          font-size: 17px;
      }
      .tab button:hover {
          background-color: #ddd;
      }
      .tab button.active {
          background-color: #ccc;
      }
      .tab-content {
          display: none;
          padding: 6px 12px;
          border-top: none;
      }
      .tab-content.active {
          display: block;
      }
      .world-box {
          border: 1px solid #000;
          padding: 10px;
          margin: 10px;
          width: 80%;
          text-align: center;
      }
  </style>
  <title></title>
</head>
<body>

<h1 style="text-align: center;">Worlds</h1>

<div style="text-align: center; margin-bottom: 20px;">
  <%= button_to 'Create New World', new_world_path, method: :get, id: "create_button" %>
</div>

<div class="tab">
  <button class="tab-links active" onclick="openTab(event, 'public-worlds')">Public Worlds</button>
  <button class="tab-links" onclick="openTab(event, 'private-worlds')">Private Worlds</button>
  <button class="tab-links" onclick="openTab(event, 'friend-list')">Friends</button>
</div>

<div id="public-worlds" class="tab-content active">
  <div style="display: flex; flex-direction: column; align-items: center;">
    <% @public_worlds.each do |world| %>
      <div class="world-box">
        <h3><%= world.world_name %></h3>
        <p>Code: <%= world.world_code %></p>
        <p>Max Players: <%= world.max_player %></p>
        <%= button_to "Join", action: "join_world", id: "world_#{world[:id]}" %>
      </div>
    <% end %>
  </div>
</div>

<div id="private-worlds" class="tab-content">
  <div style="display: flex; flex-direction: column; align-items: center;">
    <% @private_worlds.each do |world| %>
      <div class="world-box">
        <h3><%= world.world_name %></h3>
        <p>Code: <%= world.world_code %></p>
        <p>Max Players: <%= world.max_player %></p>
        <%= button_to "Join", action: "join_world", id: "world_#{world[:id]}" %>
      </div>
    <% end %>
  </div>
</div>

<div id="friend-list" class="tab-content">
  <div style="display: flex; flex-direction: column; align-items: center;">
    <div class="world-box">
      <p>Sorry, you currently have no friend</p>
      <%= form_tag "/worlds", method: :get, id: 'add_friend_form' do %>
        <%= submit_tag 'Add friend', id: 'add_friend_button' %>
      <% end %>
    </div>
  </div>
</div>

<script>
    function openTab(evt, tabName) {
        let i, tab_content, tab_links;
        tab_content = document.getElementsByClassName("tab-content");
        for (i = 0; i < tab_content.length; i++) {
            tab_content[i].classList.remove("active");
        }
        tab_links = document.getElementsByClassName("tab-links");
        for (i = 0; i < tab_links.length; i++) {
            tab_links[i].classList.remove("active");
        }
        document.getElementById(tabName).classList.add("active");
        evt.currentTarget.classList.add("active");
    }
</script>

</body>
</html>